System Design —Å–æ—Ü–∏–∞–ª—å–Ω–æ–∏ÃÜ —Å–µ—Ç–∏ –¥–ª—è –∫—É—Ä—Å–∞ –ø–æ System Design üë®‚Äçüíª

## ‚úàÔ∏è [Go Travel](https://github.com/kodsurfer/social_network_system_design)

### üòé –ë–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª—å:

- –ø—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ—Å—Ç–æ–≤ –∏–∑ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏, –Ω–µ–±–æ–ª—å—à–∏–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏ –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –º–µ—Å—Ç—É –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è
- –æ—Ü–µ–Ω–∫–∞ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø–æ—Å—Ç–æ–≤ –¥—Ä—É–≥–∏—Ö –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤
- –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –¥—Ä—É–≥–∏—Ö –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤, —á—Ç–æ–±—ã —Å–ª–µ–¥–∏—Ç—å –∑–∞ –∏—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é
- –ø–æ–∏—Å–∫ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –º–µ—Å—Ç –¥–ª—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å—Ç–æ–≤ —Å —ç—Ç–∏—Ö –º–µ—Å—Ç –≤ –≤–∏–¥–µ –¢–û–ü–∞ –º–µ—Å—Ç –ø–æ —Å—Ç—Ä–∞–Ω–∞–º –∏ –≥–æ—Ä–æ–¥–∞–º
- –æ–±—â–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞–º–∏ –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–µ–Ω—Ç—ã –¥—Ä—É–≥–∏—Ö –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤

### üìú –ó–∞–¥–∞—á–∏:

- –æ–±–µ—Å–ø–µ—á–∏—Ç—å –ª–∏–Ω–µ–π–Ω—ã–π —Ä–æ—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –±–∞–∑—ã –¥–æ –ø—Ä–∏–º–µ—Ä–Ω–æ 10 000 000 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –¥–µ–Ω—å —á–µ—Ä–µ–∑ –≥–æ–¥, –ø–æ—Å–ª–µ
  —á–µ–≥–æ —Ç–∞–∫–∂–µ –±—É–¥–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞—Å—Ç–∏.
- —É—á–µ—Å—Ç—å –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é –±–∏–∑–Ω–µ—Å–∞ –ø–æ–∫–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ –∞—É–¥–∏—Ç–æ—Ä–∏—é —Å—Ç—Ä–∞–Ω –°–ù–ì
- –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –≤—ã—Å–æ–∫–æ–π –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é
- —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —É–¥–æ–±–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π, –≤ —Ç–æ–º —á–∏—Å–ª–µ —á–µ—Ä–µ–∑ –º–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ –±—Ä–∞—É–∑–µ—Ä
- —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏ –Ω–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É—è –ø–æ–ª—É—á–µ–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ—Ç –±–∏–∑–Ω–µ—Å–∞, –∞–Ω–∞–ª–∏–∑
  –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ –∏ –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã–π –æ–ø—ã—Ç
- –æ—Ü–µ–Ω–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–æ—Ü–∏–∞–ª—å–Ω—É—é —Å–µ—Ç—å

### üìï –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:

- –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–µ–Ω—Ç—ã –ø–æ—Å—Ç–æ–≤ —Ñ—Ä–µ–Ω–¥–ª–∏—Å—Ç–∞
- —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ —Å —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ, —Ç–µ–∫—Å—Ç–æ–º –∏ –∞—É–¥–∏–æ —Ç—Ä–µ–∫–∞–º–∏
- –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥–µ–æ–º–µ—Ç–∫–∏ –∫ –ø–æ—Å—Ç—É
- –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø–æ—Å—Ç—É
- –ª–∞–π–∫–∏ –∫ –ø–æ—Å—Ç—É –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º
- –ø–æ–∏—Å–∫ –ø–æ —Ç–µ–≥–∞–º

### üìó –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:

- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 10 000 000 DAU
- –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –≤ —Å—Ä–µ–¥–Ω–µ–º, –±—É–¥–µ—Ç –¥–µ–ª–∞—Ç—å 13 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –¥–µ–Ω—å (1 –ø–æ—Å—Ç, 1 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, 1
  —Å–æ–æ–±—â–µ–Ω–∏–µ / –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –∑–∞–ø–∏—Å—å, –ø—Ä–æ—Å–º–æ—Ç—Ä—ã –ª–µ–Ω—Ç—ã: 10 –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —á—Ç–µ–Ω–∏–µ)
- –†–µ–≥–∏–æ–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: –∞—É–¥–∏—Ç–æ—Ä–∏—è —Å—Ç—Ä–∞–Ω –°–ù–ì
- –°–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏: —Å–µ–∑–æ–Ω—ã –ª–µ—Ç–Ω–∏—Ö –æ—Ç–ø—É—Å–∫–æ–≤ –∏ –Ω–æ–≤–æ–≥–æ–¥–Ω–∏—Ö –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤. –í –≤—ã—Å–æ–∫–∏–π —Å–µ–∑–æ–Ω 40 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –¥–µ–Ω—å (2 –ø–æ—Å—Ç–∞,
  5 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤, 3 —Å–æ–æ–±—â–µ–Ω–∏—è / –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –∑–∞–ø–∏—Å—å, –ø—Ä–æ—Å–º–æ—Ç—Ä—ã –ª–µ–Ω—Ç—ã: 20 –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —á—Ç–µ–Ω–∏–µ)
- –£—Å–ª–æ–≤–∏—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö: —Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ–≥–¥–∞
- –õ–∏–º–∏—Ç—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: 1 000 000 –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –∑–∞–ø—Ä–æ—Å —á—Ç–µ–Ω–∏—è –Ω–µ –±–æ–ª–µ–µ 1 —Å–µ–∫, –Ω–∞ –∑–∞–ø—Ä–æ—Å –∑–∞–ø–∏—Å–∏ –Ω–µ –±–æ–ª–µ–µ 5 —Å–µ–∫
- –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: –Ω–µ –±–æ–ª–µ–µ, —á–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ –ø—Ä–æ—Å—Ç–æ—è –≤ –≥–æ–¥

### üìà –û—Ü–µ–Ω–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏:

–î–æ–ø—É—Å—Ç–∏–º —Å–ª–µ–¥—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ:

    –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 10 000 000 DAU
    –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ–π—Å—Ç–≤–∏–π –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –¥–µ–Ω—å:
        –ü—É–±–ª–∏–∫–∞—Ü–∏–∏: 1 –ø–æ—Å—Ç
        –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏: 1 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
        –ü—Ä–æ—Å–º–æ—Ç—Ä—ã –ª–µ–Ω—Ç—ã: 10 –∑–∞–ø—Ä–æ—Å–æ–≤

–í—ã—á–∏—Å–ª–∏–º —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:

    - –û–±—ã—á–Ω—ã–π —Å–µ–∑–æ–Ω:
        10 000 000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π * 1 –ø–æ—Å—Ç = 10 000 000 –ø–æ—Å—Ç–æ–≤
        –†–∞—Å—á–µ—Ç RPS —Å–µ—Ä–≤–∏—Å–∞ –ø–æ—Å—Ç–æ–≤: –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ –¥–µ–Ω—å / –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ–∫—É–Ω–¥ –∑–∞ –¥–µ–Ω—å = 10 000 000 / 86400 ~ 116 rps

        10 000 000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π * 0.2 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è = 2 000 000 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
        –†–∞—Å—á–µ—Ç RPS —Å–µ—Ä–≤–∏—Å–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤: 2 000 000 / 86400 ~ 23 rps
        
        10 000 000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π * 2 —Å–æ–æ–±—â–µ–Ω–∏—è = 20 000 000 —Å–æ–æ–±—â–µ–Ω–∏–π
        –†–∞—Å—á–µ—Ç RPS —Å–µ—Ä–≤–∏—Å–∞ —Å–æ–æ–±—â–µ–Ω–∏–π: 20 000 000 / 86400 ~ 232 rps

        –†–∞—Å—á–µ—Ç RPS –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞–ø–∏—Å–∏: 32 000 000 / 86400 ~ 371 rps
        –†–∞—Å—á–µ—Ç —Ç—Ä–∞—Ñ–∏–∫–∞ –∑–∞–ø–∏—Å–∏ (–∑–∞–ø—Ä–æ—Å 2 –ö–ë): Traffic = RPS * avg_request_size Traffic = 371 * 2048 –ë–∞–π—Ç Traffic ~ 759808 –ë–∞–π—Ç/—Å (–∏–ª–∏ ~ 0.7 –ú–ë/—Å)

        10 000 000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π * 10 –∑–∞–ø—Ä–æ—Å–æ–≤ = 100 000 000 –∑–∞–ø—Ä–æ—Å–æ–≤ —á—Ç–µ–Ω–∏—è
        –†–∞—Å—á–µ—Ç RPS —Å–µ—Ä–≤–∏—Å–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ —á—Ç–µ–Ω–∏—è: 100 000 000 / 86400 ~ 1158 rps
        –†–∞—Å—á–µ—Ç —Ç—Ä–∞—Ñ–∏–∫–∞ –∑–∞–ø–∏—Å–∏ (–∑–∞–ø—Ä–æ—Å 1 –ö–ë): Traffic = RPS * avg_request_size Traffic = 1158 * 1024 –ë–∞–π—Ç Traffic ~ 1185792 –ë–∞–π—Ç/—Å (–∏–ª–∏ ~ 1.2 –ú–ë/—Å)

        –†–∞—Å—á–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π: –æ–±—ã—á–Ω–æ 10% –æ—Ç –æ–±—â–µ–≥–æ DAU, —Ç–æ –µ—Å—Ç—å: 10 000 000 * 0.1 = 1 000 000

–î–∏—Å–∫–∏:

        1 –ø–æ—Å—Ç = 4 –ö–ë
        10 000 000 –ø–æ—Å—Ç–æ–≤ –≤ –¥–µ–Ω—å
        –†–∞—Å—á–µ—Ç —Ç—Ä–∞—Ñ–∏–∫–∞ –ø–æ—Å—Ç–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É: 4 –ö–ë * 10 000 000 / 86400 ~ 0.5 –ú–ë/—Å
        –†–∞—Å—á–µ—Ç —Ç—Ä–∞—Ñ–∏–∫–∞ –ø–æ—Å—Ç–æ–≤ –≤ –≥–æ–¥: 4 –ö–ë * 10 000 000 * 365 ~ 13.6 –ü–ë/–≥–æ–¥
        SSD (Sata): 13.6 –ü–ë / 100 –ì–ë ~ 140 –¥–∏—Å–∫–æ–≤
        IOPS: 116 rps (–∑–∞–ø–∏—Å—å) + 1158 rps (—á—Ç–µ–Ω–∏–µ) = 1274
        –î–∏—Å–∫–∏ IOPS: 1529 / 500 ~ 3

        1 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π = 500 –±–∞–π—Ç
        2 000 000 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ –¥–µ–Ω—å
        –†–∞—Å—á–µ—Ç —Ç—Ä–∞—Ñ–∏–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ —Å–µ–∫—É–Ω–¥—É: 500 –ë * 2 000 000 / 86400 ~ 11.3 –ö–ë/—Å
        –†–∞—Å—á–µ—Ç —Ç—Ä–∞—Ñ–∏–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ –≥–æ–¥: 500 –ë * 2 000 000 * 365 ~ 340 –ì–ë/–≥–æ–¥
        SSD (Sata): 340 –ì–ë / 100 –ì–ë ~ 4 –¥–∏—Å–∫–∞
        IOPS: 23 rps (–∑–∞–ø–∏—Å—å) + 2315 rps (—á—Ç–µ–Ω–∏–µ) = 2338
        –î–∏—Å–∫–∏ IOPS: 2338 / 500 ~ 5

        1 —Å–æ–æ–±—â–µ–Ω–∏–µ = 500 –±–∞–π—Ç
        20 000 000 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –¥–µ–Ω—å
        –†–∞—Å—á–µ—Ç —Ç—Ä–∞—Ñ–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Å–µ–∫—É–Ω–¥—É: 500 –ë * 20 000 000 / 86400 ~ 113 –ö–ë/—Å
        –†–∞—Å—á–µ—Ç —Ç—Ä–∞—Ñ–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –≥–æ–¥: 500 –ë * 20 000 000 * 365 ~ 3.4 –ü–ë/–≥–æ–¥
        SSD (Sata): 3.4 –ü–ë / 100 –ì–ë ~ 34 –¥–∏—Å–∫–∞
        IOPS: 232 rps (–∑–∞–ø–∏—Å—å) + 2315 rps (—á—Ç–µ–Ω–∏–µ) = 2547
        –î–∏—Å–∫–∏ IOPS: 2547 / 500 ~ 5

–†–∞—Å—á–µ—Ç —Ö–æ—Å—Ç–æ–≤:

        –§–∞–∫—Ç–æ—Ä —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏  = 2
        –¢–∏–ø —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ = master-slave/sync
        –®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –ø–æ chats.id
        1 SSD –Ω–∞ 1Tb (—Ñ–∞–∫—Ç–æ—Ä 2—Ö) - –ª–∞–π–∫–∏
        3 SSD –Ω–∞ 2Tb (—Ñ–∞–∫—Ç–æ—Ä 2—Ö) - —é–∑–µ—Ä—ã
        4 SSD –Ω–∞ 8Tb (—Ñ–∞–∫—Ç–æ—Ä 2—Ö) - –ø–æ—Å—Ç—ã
        3 —Ö–æ—Å—Ç–∞ –ø–æ 1 SSD –Ω–∞ 1Tb (—Ñ–∞–∫—Ç–æ—Ä 2—Ö) - —á–∞—Ç—ã
        1 —Ö–æ—Å—Ç —Å 1 SSD –Ω–∞ 2Tb (—Ñ–∞–∫—Ç–æ—Ä 2—Ö) - –∫–æ–º–º–µ–Ω—Ç—ã
        2 —Ö–æ—Å—Ç–∞ —Å 2 SSD –Ω–∞ 2Tb (—Ñ–∞–∫—Ç–æ—Ä 2—Ö) - —Å–æ–æ–±—â–µ–Ω–∏—è
        1 —Ö–æ—Å—Ç —Å 4 SSD –Ω–∞ 8Tb (—Ñ–∞–∫—Ç–æ—Ä 2—Ö) - —Å—Å—ã–ª–∫–∏ —Å–≤—è–∑–µ–π
